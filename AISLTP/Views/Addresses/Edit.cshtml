@model AISLTP.Entities.Address

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ViewBag.Fam @ViewBag.Ima @ViewBag.Otc</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()


    <div id="AddressBlock">
        <div class="AddressItem">
            <h4>Адрес № 1</h4>
            <div>
                <label>Область</label>
                <div>
                    <input type="text" name="Address[0].Obl" />
                </div>
            </div>
            <div>
                <div class="form-group">
                    @Html.LabelFor( model => model.OblID , "OblID" , htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.DropDownList( "OblID" , null , htmlAttributes: new { @class = "form-control" } )
                        @Html.ValidationMessageFor( model => model.OblID , "" , new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.RnID , "RnID" , htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.DropDownList( "RnID" , null , htmlAttributes: new { @class = "form-control" } )
                        @Html.ValidationMessageFor( model => model.RnID , "" , new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.NpID , "NpID" , htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.DropDownList( "NpID" , null , htmlAttributes: new { @class = "form-control" } )
                        @Html.ValidationMessageFor( model => model.NpID , "" , new { @class = "text-danger" } )
                    </div>
                </div>
            </div>
        </div>

    </div>
    <p><a class="addLink">Добавить новый элемент</a></p>
    <p><input type="submit" value="Добавить" /></p>
}


<div>
    @Html.ActionLink( "Назад" , "Index" )
</div>

@section Scripts {
    @Scripts.Render( "~/bundles/jqueryval" )
    <script>
        $(function () {
            var i = 0;
            $('.addLink').click(function () {
                i++;
                var html2Add = "<div class='bookItem'>" +
                    "<h4>Книга № " + (i + 1) + "</h4>" +
                    "<div><label>Название</label><div>" +
                    "<input type='text' name='Books[" + i + "].name' />" +
                    "</div></div></div>";
                $('#booksBlock').append(html2Add);
            })
        })
    </script>
}
